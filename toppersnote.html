<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Topper Notes - NEB HELP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Base Styles --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-color: #2a9d8f; --secondary-color: #264653; --accent-color: #e76f51;
            --light-bg: #f7f9fc; --white-bg: #ffffff; --dark-text: #343a40; --light-text: #6c757d;
            --card-bg: #f0f4f8; --card-border: #dce6f0;
        }
        body { font-family: 'Nunito', sans-serif; background-color: var(--light-bg); color: var(--dark-text); line-height: 1.6; padding-bottom: 80px; }
        .container { max-width: 800px; margin: 30px auto; padding: 25px; background-color: var(--white-bg); border-radius: 16px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08); }
        h1, h2, h3 { font-family: 'Poppins', sans-serif; }
        h1 { text-align: center; color: var(--primary-color); font-size: 2.4rem; margin-bottom: 35px; }

        /* --- Topper Card Styles --- */
        .topper-options { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .topper-card { background-color: var(--card-bg); border: 1px solid var(--card-border); border-radius: 12px; padding: 20px; display: flex; flex-direction: column; transition: box-shadow 0.3s ease, transform 0.2s ease; position: relative; }
        .topper-card:hover { box-shadow: 0 5px 12px rgba(0, 0, 0, 0.1); transform: translateY(-3px); }
        .topper-main-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .topper-name-gpa { flex-grow: 1; }
        .topper-name-gpa a { text-decoration: none; color: inherit; }
        .topper-name-gpa a:hover h3 { color: var(--primary-color); }
        .topper-name-gpa h3 { font-size: 1.4rem; color: var(--secondary-color); margin-bottom: 4px; display: inline-block; transition: color 0.2s ease; font-weight: 700; }
        .topper-name-gpa .gpa { font-size: 1rem; color: var(--light-text); font-weight: 600; display: block; }
        .topper-details { font-size: 0.95rem; color: var(--dark-text); margin-bottom: 10px; }
        .topper-details strong { color: var(--primary-color); font-weight: 700; }
        .info-icon { font-size: 1.6rem; color: var(--primary-color); cursor: pointer; padding: 5px 8px; margin-left: 10px; font-weight: bold; border-radius: 50%; transition: background-color 0.2s ease, color 0.2s ease; line-height: 1; }
        .info-icon:hover { background-color: rgba(42, 157, 143, 0.1); }

        /* --- Payment Button & Bundle Offer --- */
        .payment-section { text-align: center; margin: 40px 0; }
        .payment-button { background: linear-gradient(135deg, var(--accent-color), #d85a3e); color: white; border: none; padding: 14px 30px; font-size: 1.2rem; font-weight: 700; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(231, 111, 81, 0.3); }
        .payment-button:hover { background: linear-gradient(135deg, #c24a30, #a63e26); transform: translateY(-3px); box-shadow: 0 6px 15px rgba(231, 111, 81, 0.4); }
        .payment-button:active { transform: translateY(-1px); box-shadow: 0 3px 8px rgba(231, 111, 81, 0.3); }
        .bundle-offer { background-color: #e6fffa; border: 1px solid #a3f7e8; border-radius: 12px; padding: 25px; margin-top: 20px; text-align: center; }
        .bundle-offer h3 { font-size: 1.5rem; color: var(--secondary-color); margin-bottom: 20px; }
        .bundle-item { margin-bottom: 12px; font-size: 1rem; color: var(--dark-text); }
        .bundle-item strong { color: var(--secondary-color); }
        .bundle-price { font-weight: 700; color: var(--accent-color); }
        .offer-deadline { margin-top: 20px; font-size: 0.95rem; font-weight: 700; color: var(--accent-color); }

        /* --- Popup Overlay & Base Styles --- */
        .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.65); z-index: 1000; display: none; opacity: 0; transition: opacity 0.3s ease; }
        .popup-overlay.active { display: block; opacity: 1; }
        .popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); background-color: white; padding: 0; /* Padding handled by inner divs now */ border-radius: 12px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); z-index: 1001; width: 90%; max-width: 550px; display: none; /* Changed to none */ opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease; max-height: 85vh; display: flex; flex-direction: column; }
        .popup.active { display: flex; /* Use flex */ opacity: 1; transform: translate(-50%, -50%) scale(1); }

        /* --- Popup Header (Title + Close Button) --- */
        .popup-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 25px 15px 25px; /* Padding for header */ border-bottom: 1px solid #eee; /* Separator */ flex-shrink: 0; }
        .popup-header h3 { color: var(--primary-color); margin: 0; font-size: 1.6rem; flex-grow: 1; padding-right: 20px; /* Space for close */ text-align: left; }
        .popup-close-btn { font-size: 2.2rem; font-weight: bold; color: #aaa; background: none; border: none; cursor: pointer; line-height: 1; padding: 5px; flex-shrink: 0; }
        .popup-close-btn:hover { color: var(--dark-text); }

        /* --- Scrollable Popup Content --- */
        .popup-content-scrollable { overflow-y: auto; flex-grow: 1; padding: 20px 25px 25px 25px; /* Padding for content */ }
        .popup-content-scrollable p { margin-bottom: 12px; font-size: 1rem; line-height: 1.7; }
        .popup-content-scrollable ol { margin-left: 5px; margin-bottom: 15px; padding-left: 20px; }
        .popup-content-scrollable ol li { margin-bottom: 10px; font-size: 1rem; }
        .popup-content-scrollable ul { list-style-type: none; margin-top: 8px; margin-left: 10px; padding-left: 0; }
        .popup-content-scrollable ul li { margin-bottom: 5px; } /* Spacing for contact items */
        .popup-content-scrollable p strong, .popup-content-scrollable ul strong { color: var(--secondary-color); font-weight: 700; }

        /* --- Back Button --- */
        .back-button-container { text-align: center; margin-top: 40px; }
        .back-btn { background-color: var(--light-text); color: white; border: none; padding: 12px 28px; font-size: 1.1rem; font-weight: 600; cursor: pointer; border-radius: 8px; text-decoration: none; transition: background-color 0.3s ease; display: inline-flex; align-items: center; }
        .back-btn i { margin-right: 8px; }
        .back-btn:hover { background-color: var(--dark-text); }

        /* --- Pointer Popup (One-Time Hint) --- */
        .pointer-popup { position: absolute; background-color: var(--secondary-color); color: white; padding: 10px 15px; border-radius: 8px; box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2); z-index: 10; display: none; /* Hidden by default */ font-size: 0.9rem; line-height: 1.4; max-width: 180px; text-align: center; }
        .pointer-popup::after { content: ''; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); border-width: 7px; border-style: solid; border-color: transparent transparent var(--secondary-color) transparent; }
        .pointer-popup-close { position: absolute; top: -5px; right: -5px; background-color: var(--accent-color); color: white; border: none; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 18px; text-align: center; cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.3); }

        /* --- Responsive Adjustments --- */
        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            .container { padding: 20px; margin: 20px auto; }
            .topper-name-gpa h3 { font-size: 1.2rem; }
            .info-icon { font-size: 1.4rem; }
            .payment-button { font-size: 1.1rem; padding: 12px 25px;}
            .bundle-offer h3 { font-size: 1.3rem; }
            .popup { max-width: 95%; } /* Slightly wider on small screens */
            .popup-header { padding: 15px 20px 10px 20px; }
            .popup-header h3 { font-size: 1.4rem; }
            .popup-content-scrollable { padding: 15px 20px 20px 20px; }
            .popup-content-scrollable p, .popup-content-scrollable ol li { font-size: 0.95rem; }
            .pointer-popup { font-size: 0.85rem; max-width: 150px; }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1><i class="fas fa-star" style="color: #f4a261;"></i> Unlock Top Scores with Topper Notes</h1>

        <section class="topper-options">
            <!-- Topper 1: Suman Basyal -->
            <div class="topper-card" id="first-topper-card">
                <div class="topper-main-info">
                    <div class="topper-name-gpa">
                        <a href="sumanbasyal.html" title="View Suman's Notes"><h3>Suman Basyal</h3></a>
                        <span class="gpa">3.83 GPA</span>
                    </div>
                    <span class="info-icon" data-topper="suman" title="More about Suman"><i class="fas fa-info-circle"></i></span>
                </div>
                <div class="topper-details">
                    Class 10 | Experienced with New Curriculum<br>
                    Price: <strong>Rs. 45</strong> per subject
                </div>
                 <!-- Pointer Popup - positioned absolutely inside this card -->
                 <div id="pointer-popup" class="pointer-popup">
                     Click the '<i class="fas fa-info-circle"></i>' icon for details about the topper!
                     <button class="pointer-popup-close" aria-label="Dismiss hint">×</button>
                 </div>
            </div>

            <!-- Topper 2: Kshitij Chapagain -->
            <div class="topper-card">
                 <div class="topper-main-info">
                    <div class="topper-name-gpa">
                        <a href="kshitijchapagain.html" title="View Kshitij's Notes"><h3>Kshitij Chapagain</h3></a>
                         <span class="gpa">3.7 GPA</span>
                    </div>
                    <span class="info-icon" data-topper="kshitij" title="More about Kshitij"><i class="fas fa-info-circle"></i></span>
                </div>
                <div class="topper-details">
                    Class 10 | Future Doctor's Notes (MBBS Student)<br>
                    Price: <strong>Rs. 42</strong> per subject
                </div>
            </div>

            <!-- Topper 3: Pranav Khanal -->
            <div class="topper-card">
                <div class="topper-main-info">
                    <div class="topper-name-gpa">
                        <a href="pranavkhanal.html" title="View Pranav's Notes"><h3>Pranav Khanal</h3></a>
                        <span class="gpa">3.67 GPA</span>
                    </div>
                     <span class="info-icon" data-topper="pranav" title="More about Pranav"><i class="fas fa-info-circle"></i></span>
                </div>
                 <div class="topper-details">
                    Class 10 | Strong in Math & Science<br>
                    Price: <strong>Rs. 39</strong> per subject
                </div>
            </div>
        </section>

        <section class="payment-section">
            <button id="how-to-pay-btn" class="payment-button"><i class="fas fa-shopping-cart"></i> How to Get Notes?</button>
        </section>

        <section class="bundle-offer">
            <h3><i class="fas fa-tags"></i> Special Offer: Get All Subjects!</h3>
            <div class="bundle-item">
                <strong>Suman Basyal</strong> (3.83 GPA) - All Subjects: <span class="bundle-price">Rs. 100</span>
            </div>
            <div class="bundle-item">
                <strong>Kshitij Chapagain</strong> (3.7 GPA) - All Subjects: <span class="bundle-price">Rs. 89</span>
            </div>
            <div class="bundle-item">
                <strong>Pranav Khanal</strong> (3.67 GPA) - All Subjects: <span class="bundle-price">Rs. 69</span>
            </div>
            <p class="offer-deadline"><i class="fas fa-clock"></i> Limited Time Offer!</p>
        </section>

        <div class="back-button-container">
             <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
        </div>
    </div><!-- End Container -->

    <!-- --- Popups (Hidden by default) --- -->
    <div id="popup-overlay" class="popup-overlay"></div>

    <!-- Payment Info Popup -->
    <div id="payment-popup" class="popup">
        <div class="popup-header">
            <h3><i class="fas fa-info-circle"></i> How to Get Your Notes</h3>
            <button class="popup-close-btn" aria-label="Close payment info">×</button>
        </div>
        <div class="popup-content-scrollable"> <!-- Scrollable content -->
            <p>Follow these easy steps:</p>
            <ol>
                <li>Contact us via Email or WhatsApp to tell us which notes you want:
                    <ul>
                        <li><i class="far fa-envelope"></i> Email: <strong>s2064b@gmail.com</strong></li>
                        <li><i class="fab fa-whatsapp"></i> WhatsApp: <strong>9824406202</strong></li>
                    </ul>
                </li>
                <li>Make the payment (we will provide details) and get your unique subject code(s) from us.</li>
                <li>Click the name of the student whose notes you purchased (on the main Topper Notes page).</li>
                <li>On their page, scroll down to find the "Enter Code" section.</li>
                <li>Input the code we gave you.</li>
                <li>Select the subject you paid for.</li>
                <li>Enjoy studying with the topper notes!</li>
            </ol>
            <p><em>(Dear students, we know you'd love the notes for free, but we compensate the toppers for their hard work. This small charge helps us make more quality notes available. We promise no single note bundle will exceed Rs. 100. Your education is our priority!)</em></p>
            <p>Thank you for your understanding!</p>
            <!-- Add more content here if needed to test scrolling -->
        </div>
    </div>

    <!-- Topper Info Popup -->
    <div id="topper-info-popup" class="popup">
        <div class="popup-header">
             <h3 id="topper-info-name">Topper Details</h3>
             <button class="popup-close-btn" aria-label="Close topper info">×</button>
        </div>
         <div id="topper-info-content" class="popup-content-scrollable"> <!-- Scrollable content -->
             <p>Loading details...</p>
         </div>
    </div>

    <script>
        // --- DOM Elements ---
        const overlay = document.getElementById('popup-overlay');
        const paymentPopup = document.getElementById('payment-popup');
        const topperInfoPopup = document.getElementById('topper-info-popup');
        const allPopups = document.querySelectorAll('.popup');
        const infoIcons = document.querySelectorAll('.info-icon');
        const paymentBtn = document.getElementById('how-to-pay-btn');
        const closeBtns = document.querySelectorAll('.popup-close-btn');
        const pointerPopup = document.getElementById('pointer-popup');
        const pointerPopupCloseBtn = pointerPopup?.querySelector('.pointer-popup-close'); // Added safety check
        const firstInfoIcon = document.querySelector('#first-topper-card .info-icon');

        // --- Topper Information Data (Keep your existing data here) ---
        const topperDetails = {
             suman: {
                name: "Suman Basyal (3.83 GPA)",
                info: `<p>Suman is a top student from his class and town. He took the SEE exam in 2079, right after the new curriculum started, so he knows the new topics well.</p>
                       <p>He dreams of becoming a professor and enjoys helping others learn. His notes include study material, examples, memory tricks (mnemonics), and clear explanations.</p>
                       <p>Suman also taught tuition to 50 students from the 2080 batch, and all scored A+! These notes use methods that help modern students understand easily.</p>
                       <p><strong>Good News:</strong> Suman is part of our team! If you choose his notes, you can contact him directly to ask questions.</p>`
            },
            kshitij: {
                name: "Kshitij Chapagain (3.7 GPA)",
                info: `<p>Kshitij is a topper from Mahilwar, Lumbini. He is currently studying MBBS (medicine) at USCMS.</p>
                       <p>Think of these as the "notes of a future doctor"! They are well-organized and clear, reflecting the study habits needed for demanding fields.</p>`
            },
            pranav: {
                name: "Pranav Khanal (3.67 GPA)",
                info: `<p>Pranav is excellent in Math and Science, scoring A+ in both subjects. These notes are especially strong for these subjects.</p>
                       <p>His overall GPA is slightly lower because he finds descriptive subjects like Nepali and Social Studies more challenging (scored B+ in both).</p>
                       <p>If Math and Science are your focus, Pranav's notes offer great insights and methods.</p>`
            }
        };

        // --- Popup Management Functions ---
        function openPopup(popupElement) {
            if (!popupElement) return;
            overlay.classList.add('active');
            popupElement.classList.add('active');
            // Scroll content to top when opening
            const scrollableContent = popupElement.querySelector('.popup-content-scrollable');
            if (scrollableContent) {
                scrollableContent.scrollTop = 0;
            }
            document.body.style.overflow = 'hidden';
        }

        function closePopups() {
            overlay.classList.remove('active');
            allPopups.forEach(popup => popup.classList.remove('active'));
            document.body.style.overflow = '';
        }

        function showTopperInfo(topperKey) {
            const details = topperDetails[topperKey];
            if (!details) return;

            // Target the specific elements within the topper info popup
            const nameElement = topperInfoPopup.querySelector('#topper-info-name');
            const contentElement = topperInfoPopup.querySelector('#topper-info-content');

            if (nameElement) nameElement.textContent = details.name;
            if (contentElement) contentElement.innerHTML = details.info;

            openPopup(topperInfoPopup); // Open the generic topper info popup
        }

        // --- Pointer Popup Logic ---
        function showPointerPopup() {
            if (!pointerPopup || !firstInfoIcon) return;

            const iconRect = firstInfoIcon.getBoundingClientRect();
            // Position relative to viewport initially might be easier
            // Let CSS handle absolute positioning relative to the card

            pointerPopup.style.top = `${iconRect.bottom + window.scrollY + 10}px`; // Below icon + gap
            pointerPopup.style.left = `${iconRect.left + window.scrollX + (iconRect.width / 2) - (pointerPopup.offsetWidth / 2)}px`; // Centered below icon
            // **Revert to CSS positioning** - The absolute positioning in CSS relative to the card is better. JS positioning here is tricky with scroll.
            // Let's try CSS positioning only. We just need to make it display block.
             const iconParentCard = firstInfoIcon.closest('.topper-card');
             const iconTopRelToCard = firstInfoIcon.offsetTop;
             const iconLeftRelToCard = firstInfoIcon.offsetLeft;
             const iconHeight = firstInfoIcon.offsetHeight;
             const iconWidth = firstInfoIcon.offsetWidth;

             // Position below the icon, centered horizontally relative to icon within the card
             pointerPopup.style.top = `${iconTopRelToCard + iconHeight + 10}px`; // 10px gap below icon
             pointerPopup.style.left = `${iconLeftRelToCard + (iconWidth / 2) - (pointerPopup.offsetWidth / 2)}px`; // Centered under icon


            pointerPopup.style.display = 'block';
        }

        // --- Event Listeners ---

        // Open "How to Get Notes" Popup - ALWAYS works
        if(paymentBtn) {
            paymentBtn.addEventListener('click', () => {
                openPopup(paymentPopup);
            });
        }

        // Open Topper Info Popup - ALWAYS works for each icon
        infoIcons.forEach(icon => {
            icon.addEventListener('click', (e) => {
                const topperKey = e.currentTarget.getAttribute('data-topper');
                showTopperInfo(topperKey);
                // Hide pointer popup if user clicks the icon it's pointing to
                if (pointerPopup && pointerPopup.style.display === 'block') {
                    pointerPopup.style.display = 'none';
                }
            });
        });

        // Close Popups using Close Buttons or Overlay Click
        closeBtns.forEach(btn => {
            btn.addEventListener('click', closePopups);
        });
        if(overlay) {
            overlay.addEventListener('click', closePopups);
        }

        // Pointer Popup Close Button
        if (pointerPopupCloseBtn) {
            pointerPopupCloseBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent card click if needed
                pointerPopup.style.display = 'none';
            });
        }

        // --- Run on Page Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Logic for the ONE-TIME pointer popup only
            const visitedKey = 'topperNotesPointerShown'; // Use a specific key
            const hasSeenPointer = localStorage.getItem(visitedKey);

            if (!hasSeenPointer && pointerPopup && firstInfoIcon) { // Check elements exist
                 // Use setTimeout for layout stability
                 setTimeout(() => {
                    // Recalculate offsetWidth *inside* timeout after display is potentially set
                    const iconParentCard = firstInfoIcon.closest('.topper-card');
                     const iconTopRelToCard = firstInfoIcon.offsetTop;
                     const iconLeftRelToCard = firstInfoIcon.offsetLeft;
                     const iconHeight = firstInfoIcon.offsetHeight;
                     const iconWidth = firstInfoIcon.offsetWidth;

                     pointerPopup.style.display = 'block'; // Make it visible *before* getting offsetWidth
                     const popupWidth = pointerPopup.offsetWidth; // Get width AFTER display: block

                     // Position below the icon, centered horizontally relative to icon within the card
                     pointerPopup.style.top = `${iconTopRelToCard + iconHeight + 10}px`; // 10px gap below icon
                     pointerPopup.style.left = `${iconLeftRelToCard + (iconWidth / 2) - (popupWidth / 2)}px`; // Centered under icon


                 }, 500); // 500ms delay
                localStorage.setItem(visitedKey, 'true');
            }

             // Check if topperDetails is populated (basic check)
             if (typeof topperDetails === 'undefined' || Object.keys(topperDetails).length === 0) {
                 console.error("Topper details data is missing or empty!");
             }
        });

    </script>

</body>
</html>
